{"version":3,"file":"guide-mini-vue.ejs.js","sources":["../../shared/src/toDisplayString.ts","../../shared/src/shapeFlags.ts","../../shared/src/index.ts","../../runtime-core/src/vnode.ts","../../runtime-core/src/h.ts","../../runtime-core/src/renderSlots.ts","../../reactivity/src/effect.ts","../../reactivity/src/dep.ts","../../reactivity/src/baseHandlers.ts","../../reactivity/src/reactive.ts","../../reactivity/src/ref.ts","../../runtime-core/src/componentEmit.ts","../../runtime-core/src/componentProps.ts","../../runtime-core/src/componentPublicInstance.ts","../../runtime-core/src/componentSlots.ts","../../runtime-core/src/component.ts","../../runtime-core/src/apiInject.ts","../../runtime-core/src/componentRenderUtils.ts","../../runtime-core/src/createApp.ts","../../runtime-core/src/scheduler.ts","../../runtime-core/src/renderer.ts","../../runtime-dom/src/index.ts","../../algorithms/src/util.ts","../../algorithms/src/min-max-search.ts","../../algorithms/src/counting-sort.ts","../../algorithms/src/quick-sort.ts","../../compiler-core/src/runtimeHelpers.ts","../../compiler-core/src/ast.ts","../../compiler-core/src/codegen.ts","../../compiler-core/src/parse.ts","../../compiler-core/src/transform.ts","../../compiler-core/src/transforms/transformExpression.ts","../../compiler-core/src/transforms/transformElement.ts","../../compiler-core/src/utils.ts","../../compiler-core/src/transforms/transformText.ts","../../compiler-core/src/compile.ts","../src/index.ts"],"sourcesContent":["export const toDisplayString = (val) => {\r\n    return String(val);\r\n  };","// 组件的类型\r\nexport const enum ShapeFlags {\r\n  // 最后要渲染的 element 类型\r\n  //ELEMENT -> 0001;\r\n  // STATEFUL_COMPONENT 0010\r\n  // TEXT_CHILDREN 0100\r\n  // ARRAY_CHILDREN 1000\r\n  ELEMENT = 1, \r\n  // 组件类型\r\n  STATEFUL_COMPONENT = 1 << 1,\r\n  // vnode 的 children 为 string 类型\r\n  TEXT_CHILDREN = 1 << 2,\r\n  // vnode 的 children 为数组类型\r\n  ARRAY_CHILDREN = 1 << 3,\r\n  // vnode 的 children 为对象类型\r\n  SLOTS_CHILDREN = 1<< 4\r\n}\r\n","export * from \"./toDisplayString\";\r\nexport const extend = Object.assign;\r\n\r\nexport const isObject = (val) => {\r\n  return val !== null && typeof val === \"object\";\r\n};\r\n\r\nexport function hasChanged(value, oldValue) {\r\n  return !Object.is(value, oldValue);\r\n}\r\n\r\nexport const hasOwn = (val, key) =>\r\n  Object.prototype.hasOwnProperty.call(val, key);\r\n\r\nconst camelizeRE = /-(\\w)/g;\r\n/**\r\n * @private\r\n * 把烤肉串命名方式转换成驼峰命名方式\r\n */\r\nexport const camelize = (str: string): string => {\r\n  return str.replace(camelizeRE, (_, c) => (c ? c.toUpperCase() : \"\"));\r\n};\r\n/**\r\n * @private\r\n * 首字母大写\r\n */\r\nexport const capitalize = (str: string) =>\r\n  str.charAt(0).toUpperCase() + str.slice(1);\r\n\r\n/**\r\n * @private\r\n * 添加 on 前缀，并且首字母大写\r\n */\r\nexport const toHandlerKey = (str: string) =>\r\n  str ? `on${capitalize(str)}` : ``;\r\n\r\n// 用来匹配 kebab-case 的情况\r\n// 比如 onTest-event 可以匹配到 T\r\n// 然后取到 T 在前面加一个 - 就可以\r\n// \\BT 就可以匹配到 T 前面是字母的位置\r\nconst hyphenateRE = /\\B([A-Z])/g;\r\n/**\r\n * @private\r\n */\r\nexport const hyphenate = (str: string) =>\r\n  str.replace(hyphenateRE, \"-$1\").toLowerCase();\r\n\r\nexport const EMPTY_OBJ = {};\r\n\r\nexport const isString = (val) => typeof val === \"string\";\r\n\r\nexport { ShapeFlags } from \"./shapeFlags\";\r\n","import { ShapeFlags } from \"@guide-mini-vue/shared\";\r\n\r\nexport const Fragment = Symbol(\"Fragment\");\r\nexport const Text = Symbol(\"Text\");\r\n\r\nexport { createVNode as createElementVNode };\r\n\r\nexport function createVNode(type, props?, children?) {\r\n  const vnode = {\r\n    type,\r\n    props,\r\n    children,\r\n    component: null,\r\n    key: props && props.key,\r\n    shapeFlag: getShapeFlag(type),\r\n    el: null,\r\n  };\r\n  // children\r\n  if (typeof children === \"string\") {\r\n    vnode.shapeFlag |= ShapeFlags.TEXT_CHILDREN;\r\n  } else if (Array.isArray(children)) {\r\n    vnode.shapeFlag |= ShapeFlags.ARRAY_CHILDREN;\r\n  }\r\n\r\n  // 组件 + children object\r\n\r\n  if (vnode.shapeFlag & ShapeFlags.STATEFUL_COMPONENT) {\r\n    if (typeof children === \"object\") {\r\n      vnode.shapeFlag |= ShapeFlags.SLOTS_CHILDREN;\r\n    }\r\n  }\r\n\r\n  return vnode;\r\n}\r\n\r\nexport function createTextVNode(text: string) {\r\n  return createVNode(Text, {}, text);\r\n}\r\n\r\nfunction getShapeFlag(type: any) {\r\n  return typeof type === \"string\"\r\n    ? ShapeFlags.ELEMENT\r\n    : ShapeFlags.STATEFUL_COMPONENT;\r\n}\r\n","import { createVNode } from \"./vnode\";\r\nexport const h = (type: string, props: any, children: string | Array<any>) => {\r\n  return createVNode(type, props, children);\r\n};\r\n","import { Fragment, createVNode } from \"./vnode\";\r\n\r\nexport function renderSlots(slots, name, props) {\r\n  const slot = slots[name];\r\n\r\n  if (slot) {\r\n    // function\r\n\r\n    if (typeof slot === \"function\") {\r\n      return createVNode(Fragment, {}, slot(props));\r\n    }\r\n  }\r\n}\r\n","import { extend } from \"@guide-mini-vue/shared\";\r\nlet activeEffect;\r\nlet shouldTrack = false;\r\n\r\nexport class ReactiveEffect {\r\n  active = true;\r\n  deps = [];\r\n  onStop?: () => void;\r\n  constructor(public fn, public scheduler?) {\r\n    console.log(\"创建 ReactiveEffect 对象\");\r\n  }\r\n  run() {\r\n    // 运行 run 的时候，可以控制 要不要执行后续收集依赖的一步\r\n    // 目前来看的话，只要执行了 fn 那么就默认执行了收集依赖\r\n    // 这里就需要控制了\r\n\r\n    // 是不是收集依赖的变量\r\n\r\n    // 执行 fn  但是不收集依赖\r\n    if (!this.active) {\r\n      return this.fn();\r\n    }\r\n\r\n    // 执行 fn  收集依赖\r\n    // 可以开始收集依赖了\r\n    shouldTrack = true;\r\n\r\n    // 执行的时候给全局的 activeEffect 赋值\r\n    // 利用全局属性来获取当前的 effect\r\n    activeEffect = this as any;\r\n    // 执行用户传入的 fn\r\n    // console.log(\"执行用户传入的 fn\");\r\n    const result = this.fn();\r\n    // 重置\r\n    shouldTrack = false;\r\n    activeEffect = undefined;\r\n\r\n    return result;\r\n  }\r\n  stop() {\r\n    if (this.active) {\r\n      // 如果第一次执行 stop 后 active 就 false 了\r\n      // 这是为了防止重复的调用，执行 stop 逻辑\r\n      cleanupEffect(this);\r\n      if (this.onStop) {\r\n        this.onStop();\r\n      }\r\n      this.active = false;\r\n    }\r\n  }\r\n}\r\n\r\nfunction cleanupEffect(effect) {\r\n  // 找到所有依赖这个 effect 的响应式对象\r\n  // 从这些响应式对象里面把 effect 给删除掉\r\n  effect.deps.forEach((dep) => {\r\n    dep.delete(effect);\r\n  });\r\n  effect.deps.length = 0;\r\n}\r\n\r\nconst targetMap = new Map();\r\n\r\nexport function track(target, key) {\r\n  if (!isTracking()) {\r\n    return;\r\n  }\r\n  console.log(`触发 track -> target: ${target} key:${key}`);\r\n  // 1. 先基于 target 找到对应的 dep\r\n  // 如果是第一次的话，那么就需要初始化\r\n  let depsMap = targetMap.get(target);\r\n\r\n  if (!depsMap) {\r\n    depsMap = new Map();\r\n    targetMap.set(target, depsMap);\r\n  }\r\n\r\n  let dep = depsMap.get(key);\r\n\r\n  if (!dep) {\r\n    dep = new Set();\r\n    depsMap.set(key, dep);\r\n  }\r\n\r\n  if (!activeEffect) return;\r\n\r\n  trackEffects(dep);\r\n}\r\n\r\nexport function trackEffects(dep) {\r\n  // 用 dep 来存放所有的 effect\r\n  if (!dep.has(activeEffect)) {\r\n    dep.add(activeEffect);\r\n    (activeEffect as any).deps.push(dep);\r\n  }\r\n}\r\n\r\nexport function trigger(target, key) {\r\n  let depsMap = targetMap.get(target);\r\n  let dep = depsMap.get(key);\r\n  triggerEffects(dep);\r\n}\r\n\r\nexport function triggerEffects(dep) {\r\n  // 执行收集到的所有的 effect 的 run 方法\r\n  dep.forEach((effect) => {\r\n    if (effect.scheduler) {\r\n      // scheduler 可以让用户自己选择调用的时机\r\n      effect.scheduler();\r\n    } else {\r\n      effect.run();\r\n    }\r\n  });\r\n\r\n  // for (const effect of dep) {\r\n\r\n  // }\r\n}\r\n\r\nexport function isTracking() {\r\n  return shouldTrack && activeEffect !== undefined;\r\n}\r\n\r\nexport function effect(fn, options = {}) {\r\n  const _effect = new ReactiveEffect(fn);\r\n\r\n  // 把用户传过来的值合并到 _effect 对象上去\r\n  // 缺点就是不是显式的，看代码的时候并不知道有什么值\r\n  extend(_effect, options);\r\n  _effect.run();\r\n\r\n  // 把 _effect.run 这个方法返回\r\n  // 让用户可以自行选择调用的时机（调用 fn）\r\n  const runner: any = _effect.run.bind(_effect);\r\n  runner.effect = _effect;\r\n  return runner;\r\n}\r\n\r\nexport function stop(runner) {\r\n  runner.effect.stop();\r\n}\r\n","// 用于存储所有的 effect 对象\r\nexport function createDep(effects?) {\r\n  const dep = new Set(effects);\r\n  return dep;\r\n}\r\n","import { extend, isObject } from \"@guide-mini-vue/shared\";\r\nimport { track, trigger } from \"./effect\";\r\nimport { ReactiveFlags, reactive, readonly } from \"./reactive\";\r\nconst get = createGetter();\r\nconst set = createSetter();\r\nconst readonlyGet = createGetter(true);\r\nconst shallowReadonlyGet = createGetter(true, true);\r\nfunction createGetter(isReadonly = false, shallow = false) {\r\n  return function get(target, key) {\r\n    const res = Reflect.get(target, key);\r\n    if (key === ReactiveFlags.IS_REACTIVE) {\r\n      return !isReadonly;\r\n    } else if (key === ReactiveFlags.IS_READONLY) {\r\n      return isReadonly;\r\n    }\r\n    if (!isReadonly) {\r\n      // 在触发 get 的时候进行依赖收集\r\n      track(target, key);\r\n    }\r\n\r\n    if (shallow) {\r\n      return res;\r\n    }\r\n\r\n    if (isObject(res)) {\r\n      // 把内部所有的是 object 的值都用 reactive 包裹，变成响应式对象\r\n      // 如果说这个 res 值是一个对象的话，那么我们需要把获取到的 res 也转换成 reactive\r\n      // res 等于 target[key]\r\n      return isReadonly ? readonly(res) : reactive(res);\r\n    }\r\n    return res;\r\n  };\r\n}\r\n\r\nfunction createSetter() {\r\n  return function set(target, key, value) {\r\n    const result = Reflect.set(target, key, value);\r\n\r\n    trigger(target, key);\r\n\r\n    return result;\r\n  };\r\n}\r\n\r\nexport const readonlyHandlers = {\r\n  get: readonlyGet,\r\n  set(target, key) {\r\n    // readonly 的响应式对象不可以修改值\r\n    console.warn(\r\n      `Set operation on key \"${String(key)}\" failed: target is readonly.`,\r\n      target\r\n    );\r\n    return true;\r\n  },\r\n};\r\n\r\nexport const mutableHandlers = {\r\n  get,\r\n  set,\r\n};\r\n\r\nexport const shallowReadonlyHandlers = extend(\r\n  {},\r\n  readonlyHandlers,\r\n  shallowReadonlyGet\r\n);\r\n","import { isObject } from \"@guide-mini-vue/shared\";\r\nimport { mutableHandlers, readonlyHandlers, shallowReadonlyHandlers } from \"./baseHandlers\";\r\n\r\nexport const enum ReactiveFlags {\r\n  IS_REACTIVE = \"__v_isReactive\",\r\n  IS_READONLY = \"__v_isReadonly\",\r\n}\r\n\r\nexport function reactive(raw) {\r\n  return createReactiveObject(raw, mutableHandlers);\r\n}\r\n\r\nexport function readonly(raw) {\r\n  return createReactiveObject(raw, readonlyHandlers);\r\n}\r\nexport function shallowReadonly(raw) {\r\n  return createReactiveObject(raw, shallowReadonlyHandlers);\r\n}\r\n\r\nexport function isReadonly(value) {\r\n  return !!value[ReactiveFlags.IS_READONLY];\r\n}\r\n\r\nexport function isReactive(value) {\r\n  // 如果 value 是 proxy 的话\r\n  // 会触发 get 操作，而在 createGetter 里面会判断\r\n  // 如果 value 是普通对象的话\r\n  // 那么会返回 undefined ，那么就需要转换成布尔值\r\n  return !!value[ReactiveFlags.IS_REACTIVE];\r\n}\r\n\r\nexport function isProxy(value) {\r\n  return isReactive(value) || isReadonly(value)\r\n}\r\n\r\nfunction createReactiveObject(target, baseHandlers) {\r\n  if (!isObject(target)) {\r\n    console.warn(`target ${target} 必须是一个对象`)\r\n    return\r\n  }\r\n  return new Proxy(target, baseHandlers);\r\n}\r\n","import { trackEffects, triggerEffects, isTracking } from \"./effect\";\r\nimport { createDep } from \"./dep\";\r\nimport { isObject, hasChanged } from \"@guide-mini-vue/shared\";\r\nimport { reactive } from \"./reactive\";\r\n\r\nexport class RefImpl {\r\n  private _rawValue: any;\r\n  private _value: any;\r\n  public dep;\r\n  public __v_isRef = true;\r\n  constructor(value) {\r\n    this._rawValue = value;\r\n    // 看看value 是不是一个对象，如果是一个对象的话\r\n    // 那么需要用 reactive 包裹一下\r\n    this._value = convert(value);\r\n    this.dep = createDep();\r\n  }\r\n\r\n  get value() {\r\n    // 收集依赖\r\n    trackRefValue(this);\r\n    return this._value;\r\n  }\r\n\r\n  set value(newValue) {\r\n    // 当新的值不等于老的值的话，\r\n    // 那么才需要触发依赖\r\n    if (hasChanged(newValue, this._rawValue)) {\r\n      // 更新值\r\n      this._value = convert(newValue);\r\n      this._rawValue = newValue;\r\n      // 触发依赖\r\n      triggerRefValue(this);\r\n    }\r\n  }\r\n}\r\n\r\nexport function ref(value) {\r\n  return createRef(value);\r\n}\r\n\r\nfunction convert(value) {\r\n  return isObject(value) ? reactive(value) : value;\r\n}\r\n\r\nfunction createRef(value) {\r\n  const refImpl = new RefImpl(value);\r\n\r\n  return refImpl;\r\n}\r\n\r\nexport function triggerRefValue(ref) {\r\n  triggerEffects(ref.dep);\r\n}\r\n\r\nexport function trackRefValue(ref) {\r\n  if (isTracking()) {\r\n    trackEffects(ref.dep);\r\n  }\r\n}\r\n\r\n// 把 ref 里面的值拿到\r\nexport function unRef(ref) {\r\n  return isRef(ref) ? ref.value : ref;\r\n}\r\n\r\nexport function isRef(value) {\r\n  return !!value.__v_isRef;\r\n}\r\n\r\nexport function proxyRefs(objectWithRefs) {\r\n  return new Proxy(objectWithRefs, shallowUnwrapHandlers);\r\n}\r\n\r\nconst shallowUnwrapHandlers = {\r\n  get(target, key) {\r\n    // 如果里面是一个 ref 类型的话，那么就返回 .value\r\n    // 如果不是的话，那么直接返回value 就可以了\r\n    return unRef(Reflect.get(target, key));\r\n  },\r\n  set(target, key, value) {\r\n    const oldValue = target[key];\r\n    if (isRef(oldValue) && !isRef(value)) {\r\n      return (target[key].value = value);\r\n    } else {\r\n      return Reflect.set(target, key, value);\r\n    }\r\n  },\r\n};\r\n","import { camelize, hyphenate, toHandlerKey } from \"@guide-mini-vue/shared\";\r\nexport function emit(instance, event: string, ...rawArgs) {\r\n  const { props } = instance\r\n  let handler = props[toHandlerKey(camelize(event))];\r\n\r\n  if (!handler) {\r\n    handler = props[toHandlerKey(hyphenate(event))];\r\n  }\r\n\r\n  if (handler) {\r\n    handler(...rawArgs);\r\n  }\r\n}\r\n","export function initProps(instance, rawProps) {\r\n  // TODO\r\n  // 应该还有 attrs 的概念\r\n  // attrs\r\n  // 如果组件声明了 props 的话，那么才可以进入 props 属性内\r\n  // 不然的话是需要存储在 attrs 内\r\n  // 这里暂时直接赋值给 instance.props 即可\r\n  instance.props = rawProps || {};\r\n}\r\n","import { hasOwn } from \"@guide-mini-vue/shared\";\r\n\r\nconst publicPropertiesMap = {\r\n  // 当用户调用 instance.proxy.$emit 时就会触发这个函数\r\n  // i 就是 instance 的缩写 也就是组件实例对象\r\n  $el: (i) => i.vnode.el,\r\n  $slots:(i) => i.slots,\r\n  $props:(i) => i.props\r\n};\r\n\r\n// todo 需要让用户可以直接在 render 函数内直接使用 this 来触发 proxy\r\nexport const PublicInstanceProxyHandlers = {\r\n  get({ _: instance }, key) {\r\n    // setupState\r\n    const { setupState, props } = instance;\r\n    if (key in setupState) {\r\n      return setupState[key];\r\n    }\r\n    if (hasOwn(setupState, key)) {\r\n      return setupState[key];\r\n    } else if (hasOwn(props, key)) {\r\n      return props[key];\r\n    }\r\n\r\n    const publicGetter = publicPropertiesMap[key];\r\n\r\n    if (publicGetter) {\r\n      return publicGetter(instance);\r\n    }\r\n  },\r\n};\r\n","import { ShapeFlags } from \"@guide-mini-vue/shared\";\r\n\r\nexport function initSlots(instance, children) {\r\n  const { vnode } = instance;\r\n  if (vnode.shapeFlag & ShapeFlags.SLOTS_CHILDREN) {\r\n    normalizeObjectSlots(children, (instance.slots = {}));\r\n  }\r\n}\r\n\r\nconst normalizeSlotValue = (value) => {\r\n  // 把 function 返回的值转换成 array ，这样 slot 就可以支持多个元素了\r\n  return Array.isArray(value) ? value : [value];\r\n};\r\n\r\nconst normalizeObjectSlots = (rawSlots, slots) => {\r\n  for (const key in rawSlots) {\r\n    const value = rawSlots[key];\r\n    if (typeof value === \"function\") {\r\n      // 把这个函数给到slots 对象上存起来\r\n      // 后续在 renderSlots 中调用\r\n      // TODO 这里没有对 value 做 normalize，\r\n      // 默认 slots 返回的就是一个 vnode 对象\r\n      slots[key] = (props) => normalizeSlotValue(value(props));\r\n    }\r\n  }\r\n};","import { proxyRefs, shallowReadonly } from \"@guide-mini-vue/reactivity\";\r\nimport { emit } from \"./componentEmit\";\r\nimport { initProps } from \"./componentProps\";\r\nimport { PublicInstanceProxyHandlers } from \"./componentPublicInstance\";\r\nimport { initSlots } from \"./componentSlots\";\r\n\r\nlet currentInstance = null;\r\n\r\nexport function createComponentInstance(vnode, parent) {\r\n  const component = {\r\n    vnode,\r\n    type: vnode.type,\r\n    next: null,\r\n    setupState: {},\r\n    props: {},\r\n    slots: {},\r\n    provides: parent ? parent.provides : {},\r\n    parent,\r\n    isMounted: false,\r\n    subTree: {},\r\n    emit: () => {},\r\n  };\r\n\r\n  component.emit = emit.bind(null, component) as any;\r\n\r\n  return component;\r\n}\r\n\r\nexport function setupComponent(instance) {\r\n  initProps(instance, instance.vnode.props);\r\n  initSlots(instance, instance.vnode.children); // 把虚拟节点的children赋值给Slots\r\n\r\n  setupStatefulComponent(instance);\r\n}\r\n\r\nfunction setupStatefulComponent(instance: any) {\r\n  // 获取到用户给到的配置\r\n  const Component = instance.type;\r\n  // ctx\r\n  instance.proxy = new Proxy({ _: instance }, PublicInstanceProxyHandlers);\r\n\r\n  const { setup } = Component;\r\n  if (setup) {\r\n    setCurrentInstance(instance);\r\n    // function Object\r\n    const setupResult = setup(shallowReadonly(instance.props), {\r\n      emit: instance.emit,\r\n    });\r\n    setCurrentInstance(null);\r\n    handleSetupResult(instance, setupResult);\r\n  }\r\n}\r\n\r\nfunction handleSetupResult(instance: any, setupResult: any) {\r\n  if (typeof setupResult === \"object\") {\r\n    instance.setupState = proxyRefs(setupResult);\r\n  }\r\n\r\n  finishComponentSetup(instance);\r\n}\r\n\r\nfunction finishComponentSetup(instance: any) {\r\n  const Component = instance.type;\r\n\r\n  if (compiler && !Component.render) {\r\n    if (Component.template) {\r\n      Component.render = compiler(Component.template);\r\n    }\r\n  }\r\n  // template\r\n  if (Component.render) {\r\n    instance.render = Component.render;\r\n  }\r\n}\r\n\r\nexport function getCurrentInstance() {\r\n  return currentInstance;\r\n}\r\n\r\nexport function setCurrentInstance(instance) {\r\n  currentInstance = instance;\r\n}\r\n\r\nlet compiler;\r\nexport function registerRuntimeCompiler(_compiler) {\r\n  compiler = _compiler;\r\n}\r\n","import { getCurrentInstance } from \"./component\";\r\n\r\nexport function provide(key, value) {\r\n  // 存\r\n  // key value\r\n\r\n  const currentInstance: any = getCurrentInstance();\r\n  if (currentInstance) {\r\n    let { provides } = currentInstance;\r\n    const parentProvides = currentInstance.parent.provides;\r\n\r\n    // 这里要解决一个问题\r\n    // 当父级 key 和 爷爷级别的 key 重复的时候，对于子组件来讲，需要取最近的父级别组件的值\r\n    // 那这里的解决方案就是利用原型链来解决\r\n    // provides 初始化的时候是在 createComponent 时处理的，当时是直接把 parent.provides 赋值给组件的 provides 的\r\n    // 所以，如果说这里发现 provides 和 parentProvides 相等的话，那么就说明是第一次做 provide(对于当前组件来讲)\r\n    // 我们就可以把 parent.provides 作为 currentInstance.provides 的原型重新赋值\r\n    // 至于为什么不在 createComponent 的时候做这个处理，可能的好处是在这里初始化的话，是有个懒执行的效果（优化点，只有需要的时候在初始化）\r\n    // init 只执行一次\r\n    if (provides === parentProvides) {\r\n      provides = currentInstance.provides = Object.create(parentProvides);\r\n    }\r\n\r\n    provides[key] = value;\r\n  }\r\n}\r\n\r\nexport function inject(key, defaultValue) {\r\n    const currentInstance:any = getCurrentInstance();\r\n  \r\n    if (currentInstance) {\r\n      const parentProvides = currentInstance.parent?.provides;\r\n  \r\n      if (key in parentProvides) {\r\n        return parentProvides[key];\r\n      } else if (defaultValue) {\r\n        if (typeof defaultValue === \"function\") {\r\n          return defaultValue();\r\n        }\r\n        return defaultValue;\r\n      }\r\n    }\r\n  }","export function shouldUpdateComponent(prevVNode, nextVNode) {\r\n  const { props: prevProps } = prevVNode;\r\n  const { props: nextProps } = nextVNode;\r\n  //   const emits = component!.emitsOptions;\r\n\r\n  // 这里主要是检测组件的 props\r\n  // 核心：只要是 props 发生改变了，那么这个 component 就需要更新\r\n\r\n  // 1. props 没有变化，那么不需要更新\r\n  if (prevProps === nextProps) {\r\n    return false;\r\n  }\r\n  // 如果之前没有 props，那么就需要看看现在有没有 props 了\r\n  // 所以这里基于 nextProps 的值来决定是否更新\r\n  if (!prevProps) {\r\n    return !!nextProps;\r\n  }\r\n  // 之前有值，现在没值，那么肯定需要更新\r\n  if (!nextProps) {\r\n    return true;\r\n  }\r\n\r\n  // 以上都是比较明显的可以知道 props 是否是变化的\r\n  // 在 hasPropsChanged 会做更细致的对比检测\r\n  return hasPropsChanged(prevProps, nextProps);\r\n}\r\n\r\nfunction hasPropsChanged(prevProps, nextProps): boolean {\r\n  // 依次对比每一个 props.key\r\n\r\n  // 提前对比一下 length ，length 不一致肯定是需要更新的\r\n  const nextKeys = Object.keys(nextProps);\r\n  if (nextKeys.length !== Object.keys(prevProps).length) {\r\n    return true;\r\n  }\r\n\r\n  // 只要现在的 prop 和之前的 prop 不一样那么就需要更新\r\n  for (let i = 0; i < nextKeys.length; i++) {\r\n    const key = nextKeys[i];\r\n    if (nextProps[key] !== prevProps[key]) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n","import { createVNode } from \"./vnode\";\r\n\r\nexport function createAppApi(render) {\r\n  return function createApp(rootComponent) {\r\n    return {\r\n      mount(rootContainer) {\r\n        // 先转换为vnode\r\n        // 所有的逻辑操作都会基于vnode做处理\r\n        const vnode = createVNode(rootComponent);\r\n\r\n        render(vnode, rootContainer);\r\n      },\r\n    };\r\n  };\r\n}\r\n","const queque: any[] = [];\r\nconst activePreFlushCbs: any[] = [];\r\nlet isFlushPending = false;\r\nconst p = Promise.resolve();\r\n\r\nexport function queueJobs(job) {\r\n  if (!queque.includes(job)) {\r\n    queque.push(job);\r\n  }\r\n  queueFlush();\r\n}\r\n\r\nexport function queuePreFlushCb(job) {\r\n  activePreFlushCbs.push(job);\r\n\r\n  queueFlush();\r\n}\r\n\r\nexport function nextTick(fn?) {\r\n  return fn ? p.then(fn) : p;\r\n}\r\n\r\nfunction queueFlush() {\r\n  if (isFlushPending) return;\r\n  isFlushPending = true;\r\n  nextTick(flushJobs);\r\n}\r\n\r\nfunction flushJobs() {\r\n  isFlushPending = false;\r\n  let job;\r\n\r\n  //\r\n\r\n  flushPreFlushCbs();\r\n\r\n  // component render\r\n\r\n  while ((job = queque.shift())) {\r\n    job && job();\r\n  }\r\n}\r\n\r\nfunction flushPreFlushCbs() {\r\n  for (let i = 0; i < activePreFlushCbs.length; i++) {\r\n    activePreFlushCbs[i]();\r\n  }\r\n}\r\n","import { effect } from \"@guide-mini-vue/reactivity\";\r\nimport { EMPTY_OBJ } from \"@guide-mini-vue/shared\";\r\nimport { ShapeFlags } from \"@guide-mini-vue/shared\";\r\nimport { createComponentInstance, setupComponent } from \"./component\";\r\nimport { shouldUpdateComponent } from \"./componentRenderUtils\";\r\nimport { createAppApi } from \"./createApp\";\r\nimport { queueJobs } from \"./scheduler\";\r\nimport { Fragment, Text } from \"./vnode\";\r\n\r\nexport function createRenderer(options) {\r\n  const {\r\n    createElement: hostCreateElement,\r\n    patchProp: hostPatchProp,\r\n    insert: hostInsert,\r\n    remove: hostRemove,\r\n    setElementText: hostSetElementText,\r\n  } = options;\r\n\r\n  function render(vnode, container) {\r\n    // path\r\n    patch(null, vnode, container, null, null);\r\n  }\r\n  // n1 代表的是之前的虚拟节点;n2代表的是新的。\r\n  function patch(n1, n2, container, parentComponent, anchor) {\r\n    // 判断Vnode是不是一个element\r\n    // 是element 那么 就应该处理element\r\n    // 如何判断是element类型还是component类型\r\n    // 可以通过type的类型来判断\r\n\r\n    // Fragment -> 只渲染children\r\n\r\n    const { type, shapeFlag } = n2;\r\n\r\n    switch (type) {\r\n      case Fragment:\r\n        processFragment(n1, n2, container, parentComponent, anchor);\r\n        break;\r\n\r\n      case Text:\r\n        processText(n1, n2, container);\r\n        break;\r\n\r\n      default:\r\n        if (shapeFlag & ShapeFlags.ELEMENT) {\r\n          processElement(n1, n2, container, parentComponent, anchor);\r\n        } else if (shapeFlag & ShapeFlags.STATEFUL_COMPONENT) {\r\n          processComponent(n1, n2, container, parentComponent, anchor);\r\n        }\r\n    }\r\n  }\r\n  function processElement(\r\n    n1: any,\r\n    n2: any,\r\n    container: any,\r\n    parentComponent,\r\n    anchor\r\n  ) {\r\n    // 先初始化\r\n    if (!n1) {\r\n      mountElement(n2, container, parentComponent, anchor);\r\n    } else {\r\n      patchElement(n1, n2, container, parentComponent, anchor);\r\n    }\r\n  }\r\n\r\n  function patchElement(n1, n2, container, parentComponent, anchor) {\r\n    console.log(\"n1\", n1);\r\n    console.log(\"n2\", n2);\r\n    // props\r\n    // children\r\n    const oldProps = n1.props || EMPTY_OBJ;\r\n    const newProps = n2.props || EMPTY_OBJ;\r\n\r\n    const el = (n2.el = n1.el);\r\n\r\n    patchChildren(n1, n2, el, parentComponent, anchor);\r\n    patchProp(el, oldProps, newProps);\r\n  }\r\n\r\n  function patchChildren(n1, n2, container, parentComponent, anchor) {\r\n    const prevShapeFlag = n1.shapeFlag;\r\n    const { shapeFlag } = n2;\r\n    const c1 = n1.children;\r\n    const c2 = n2.children;\r\n\r\n    if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\r\n      // 证明当前新的节点是文本节点\r\n      if (prevShapeFlag & ShapeFlags.ARRAY_CHILDREN) {\r\n        // 1. 把老的children清空。\r\n        unmountChildren(n1.children);\r\n      }\r\n      // 2. 设置新的text\r\n      // 新的是Text，老的也是Text文本节点\r\n      if (c1 !== c2) {\r\n        hostSetElementText(container, c2);\r\n      }\r\n    } else {\r\n      // 新的是一个数组\r\n      // 如果老的是一个文本，先将文本清空掉\r\n      if (prevShapeFlag & ShapeFlags.TEXT_CHILDREN) {\r\n        hostSetElementText(container, \"\");\r\n        mountChildren(c2, container, parentComponent, anchor);\r\n      } else {\r\n        // array diff array\r\n        patchKeyedChildren(c1, c2, container, parentComponent, anchor);\r\n      }\r\n    }\r\n  }\r\n\r\n  function patchKeyedChildren(\r\n    c1,\r\n    c2,\r\n    container,\r\n    parentComponent,\r\n    parentAnchor\r\n  ) {\r\n    const l2 = c2.length;\r\n    let i = 0;\r\n    let e1 = c1.length - 1;\r\n    let e2 = l2 - 1;\r\n\r\n    function isSomeVNodeType(n1, n2) {\r\n      // type\r\n      //key\r\n      return n1.type === n2.type && n1.key === n2.key;\r\n    }\r\n\r\n    // 左侧对比\r\n    while (i <= e1 && i <= e2) {\r\n      const n1 = c1[i];\r\n      const n2 = c2[i];\r\n      if (isSomeVNodeType(n1, n2)) {\r\n        patch(n1, n2, container, parentComponent, parentAnchor);\r\n      } else {\r\n        break;\r\n      }\r\n      i++;\r\n    }\r\n    // 右侧对比\r\n    while (i <= e1 && i <= e2) {\r\n      const n1 = c1[e1];\r\n      const n2 = c2[e2];\r\n      if (isSomeVNodeType(n1, n2)) {\r\n        patch(n1, n2, container, parentComponent, parentAnchor);\r\n      } else {\r\n        break;\r\n      }\r\n      e1--;\r\n      e2--;\r\n    }\r\n    // 3. 新的比老的多，需要创建。\r\n    if (i > e1) {\r\n      if (i <= e2) {\r\n        const nextPos = e2 + 1;\r\n        const anchor = nextPos + 1 < l2 ? c2[nextPos].el : null;\r\n        // 如果不止多一个，需要依次patch\r\n        while (i <= e2) {\r\n          patch(null, c2[i], container, parentComponent, anchor);\r\n          i++;\r\n        }\r\n      }\r\n    } else if (i > e2) {\r\n      // 老的比新的多，需要删除。\r\n      while (i <= e1) {\r\n        hostRemove(c1[i].el);\r\n        i++;\r\n      }\r\n    } else {\r\n      // 中间对比，先建立一个映射表\r\n      // 1. 先遍历\r\n      let s1 = i;\r\n      let s2 = i;\r\n\r\n      const toBePatched = e2 - s2 + 1;\r\n      let patched = 0;\r\n      const keyToNewIndexMap = new Map();\r\n      const newIndexToOldIndexMap = new Array(toBePatched);\r\n      let moved = false;\r\n      let maxNexIndexSoFar = 0;\r\n      // 初始化映射表\r\n      for (let i = 0; i < toBePatched; i++) {\r\n        newIndexToOldIndexMap[i] = 0; //  代表还没有建议映射关系\r\n      }\r\n\r\n      for (let i = s2; i <= e2; i++) {\r\n        const nextChild = c2[i];\r\n        keyToNewIndexMap.set(nextChild.key, i);\r\n      }\r\n      // 遍历新的数组\r\n      for (let i = s1; i <= e1; i++) {\r\n        const prevChild = c1[i];\r\n\r\n        if (patched >= toBePatched) {\r\n          hostRemove(prevChild.el);\r\n          continue;\r\n        }\r\n\r\n        // null undefined\r\n        let newIndex;\r\n        if (prevChild.key !== null) {\r\n          newIndex = keyToNewIndexMap.get(prevChild.key);\r\n        } else {\r\n          for (let j = s2; j <= e2; j++) {\r\n            if (isSomeVNodeType(prevChild, c2[j])) {\r\n              newIndex = j;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        // 如果存在通过patch递归进行对比，如果在新的里面不存在，把旧的节点删除。\r\n        if (newIndex === undefined) {\r\n          hostRemove(prevChild.el);\r\n        } else {\r\n          // 代表新节点在老节点里面存在\r\n\r\n          if (newIndex >= maxNexIndexSoFar) {\r\n            maxNexIndexSoFar = newIndex;\r\n          } else {\r\n            moved = true;\r\n          }\r\n\r\n          newIndexToOldIndexMap[newIndex - s2] = i + 1;\r\n\r\n          patch(prevChild, c2[newIndex], container, parentComponent, null);\r\n          patched++;\r\n        }\r\n      }\r\n\r\n      // 生成最长递增子序列\r\n      const increasingNewIndexSequence = moved\r\n        ? getSequence(newIndexToOldIndexMap)\r\n        : [];\r\n\r\n      let j = increasingNewIndexSequence.length - 1;\r\n      for (let i = toBePatched - 1; i >= 0; i--) {\r\n        const nextIndex = i + s2;\r\n        const nextChild = c2[nextIndex];\r\n        const anchor = nextIndex + 1 < l2 ? c2[nextIndex + 1].el : null;\r\n\r\n        if (newIndexToOldIndexMap[i] === 0) {\r\n          // 需要创建\r\n          patch(null, nextChild, container, parentComponent, anchor);\r\n        } else if (moved) {\r\n          if (j < 0 || i !== increasingNewIndexSequence[j]) {\r\n            console.log(\"移动位置\");\r\n            hostInsert(nextChild.el, container, anchor);\r\n          } else {\r\n            j--;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function unmountChildren(children) {\r\n    for (let i = 0; i < children.length; i++) {\r\n      const el = children[i].el;\r\n      // remove\r\n\r\n      hostRemove(el);\r\n    }\r\n  }\r\n\r\n  function patchProp(el, oldProps, newProps) {\r\n    if (oldProps !== newProps) {\r\n      for (const key in newProps) {\r\n        const prevProp = oldProps[key];\r\n        const nextProp = newProps[key];\r\n        if (prevProp !== nextProp) {\r\n          hostPatchProp(el, key, prevProp, nextProp);\r\n        }\r\n      }\r\n\r\n      if (oldProps !== EMPTY_OBJ) {\r\n        for (const key in oldProps) {\r\n          if (!(key in newProps)) {\r\n            hostPatchProp(el, key, oldProps[key], null);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function processText(n1: any, n2: any, container: any) {\r\n    const { children } = n2;\r\n    const textNode = (n2.el = document.createTextNode(children));\r\n    container.append(textNode);\r\n  }\r\n\r\n  function processFragment(\r\n    n1,\r\n    n2: any,\r\n    container: any,\r\n    parentComponent,\r\n    anchor\r\n  ) {\r\n    // Implement\r\n    mountChildren(n2.children, container, parentComponent, anchor);\r\n  }\r\n\r\n  function processComponent(n1, n2, container, parentComponent, anchor) {\r\n    if (!n1) {\r\n      mountComponent(n2, container, parentComponent, anchor);\r\n    } else {\r\n      // update component\r\n      updateComponent(n1, n2);\r\n    }\r\n  }\r\n\r\n  function updateComponent(n1, n2) {\r\n    const instance = (n2.component = n1.component);\r\n    if (shouldUpdateComponent(n1, n2)) {\r\n      instance.next = n2;\r\n      instance.update();\r\n    } else {\r\n      // 不需要更新也需要重置虚拟节点\r\n      n2.el = n1.el;\r\n      n2.vnode = n2;\r\n    }\r\n  }\r\n\r\n  function mountElement(vnode: any, container: any, parentComponent, anchor) {\r\n    const el = (vnode.el = hostCreateElement(vnode.type));\r\n    // string array\r\n    const { children, shapeFlag } = vnode;\r\n    if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\r\n      el.textContent = children;\r\n    } else if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\r\n      // vnode\r\n      mountChildren(vnode.children, el, parentComponent, anchor);\r\n    }\r\n    // props\r\n    const { props } = vnode;\r\n\r\n    for (const key in props) {\r\n      const val = props[key];\r\n      // const isOn = (key: string) => /^on[A-Z]/.test(key);\r\n      // if (isOn(key)) {\r\n      //   const event = key.slice(2).toLocaleLowerCase();\r\n      //   el.addEventListener(event, val);\r\n      // } else {\r\n      //   el.setAttribute(key, val);\r\n      // }\r\n      hostPatchProp(el, key, null, val);\r\n    }\r\n    // container.append(el);\r\n    // addChild()\r\n    hostInsert(el, container, anchor);\r\n  }\r\n\r\n  function mountChildren(children, container, parentComponent, anchor) {\r\n    children.forEach((v) => {\r\n      patch(null, v, container, parentComponent, anchor);\r\n    });\r\n  }\r\n\r\n  function mountComponent(\r\n    initialVNode: any,\r\n    container,\r\n    parentComponent,\r\n    anchor\r\n  ) {\r\n    const instance = (initialVNode.component = createComponentInstance(\r\n      initialVNode,\r\n      parentComponent\r\n    ));\r\n    setupComponent(instance);\r\n    setupRenderEffect(instance, initialVNode, container, anchor);\r\n  }\r\n\r\n  function setupRenderEffect(\r\n    instance: any,\r\n    initialVNode: any,\r\n    container,\r\n    anchor\r\n  ) {\r\n    instance.update = effect(\r\n      () => {\r\n        if (!instance.isMounted) {\r\n          console.log(\"init\");\r\n          const { proxy } = instance;\r\n          const subTree = (instance.subTree = instance.render.call(\r\n            proxy,\r\n            proxy\r\n          ));\r\n          // vnode -> patch\r\n          // vnode -> element\r\n          patch(null, subTree, container, instance, anchor);\r\n\r\n          initialVNode.el = subTree.el;\r\n\r\n          instance.isMounted = true;\r\n        } else {\r\n          // update\r\n          // 更新完组件的props\r\n          // 需要一个新的虚拟节点\r\n          const { next, vnode } = instance;\r\n\r\n          if (next) {\r\n            next.el = vnode.el;\r\n\r\n            updateComponentPreRender(instance, next);\r\n          }\r\n\r\n          const { proxy } = instance;\r\n          const subTree = instance.render.call(proxy, proxy);\r\n          const prevSubTree = instance.subTree;\r\n          instance.subTree = subTree;\r\n\r\n          patch(prevSubTree, subTree, container, instance, anchor);\r\n        }\r\n      },\r\n      {\r\n        scheduler() {\r\n          console.log(\"update - scheduler\");\r\n          queueJobs(instance.update);\r\n        },\r\n      }\r\n    );\r\n  }\r\n\r\n  return {\r\n    createApp: createAppApi(render),\r\n  };\r\n}\r\n\r\nfunction updateComponentPreRender(instance, nextVNode) {\r\n  // 需要更新实例对象中的props\r\n  instance.vnode = nextVNode;\r\n  instance.next = null;\r\n  instance.props = nextVNode.props;\r\n}\r\n\r\nfunction getSequence(arr: number[]): number[] {\r\n  const p = arr.slice();\r\n  const result = [0];\r\n  let i, j, u, v, c;\r\n  const len = arr.length;\r\n  for (i = 0; i < len; i++) {\r\n    const arrI = arr[i];\r\n    if (arrI !== 0) {\r\n      j = result[result.length - 1];\r\n      if (arr[j] < arrI) {\r\n        p[i] = j;\r\n        result.push(i);\r\n        continue;\r\n      }\r\n      u = 0;\r\n      v = result.length - 1;\r\n      while (u < v) {\r\n        c = (u + v) >> 1;\r\n        if (arr[result[c]] < arrI) {\r\n          u = c + 1;\r\n        } else {\r\n          v = c;\r\n        }\r\n      }\r\n      if (arrI < arr[result[u]]) {\r\n        if (u > 0) {\r\n          p[i] = result[u - 1];\r\n        }\r\n        result[u] = i;\r\n      }\r\n    }\r\n  }\r\n  u = result.length;\r\n  v = result[u - 1];\r\n  while (u-- > 0) {\r\n    result[u] = v;\r\n    v = p[v];\r\n  }\r\n  return result;\r\n}\r\n","// 源码里面这些接口是由 runtime-dom 来实现\r\n// 这里先简单实现\r\n\r\nimport { createRenderer } from \"@guide-mini-vue/runtime-core\";\r\n// 后面也修改成和源码一样的实现\r\nfunction createElement(type) {\r\n  return document.createElement(type);\r\n}\r\n\r\nfunction patchProp(el, key, prevVal, nextVal) {\r\n  const isOn = (key: string) => /^on[A-Z]/.test(key);\r\n  if (isOn(key)) {\r\n    const event = key.slice(2).toLocaleLowerCase();\r\n    el.addEventListener(event, nextVal);\r\n  } else {\r\n    if (nextVal === undefined || nextVal === null) {\r\n      el.removeAttribute(key);\r\n    } else {\r\n      el.setAttribute(key, nextVal);\r\n    }\r\n  }\r\n}\r\n\r\nfunction insert(child, parent, anchor) {\r\n  // parent.append(child);\r\n  // 把元素指定添加到对应哪个元素之前,如果anchor为null和上面是一样的。\r\n  parent.insertBefore(child, anchor || null);\r\n}\r\n\r\nfunction remove(child) {\r\n  const parent = child.parentNode;\r\n  if (parent) {\r\n    parent.removeChild(child);\r\n  }\r\n}\r\n\r\nfunction setElementText(el, text) {\r\n  el.textContent = text;\r\n}\r\n\r\nconst renderer: any = createRenderer({\r\n  createElement,\r\n  patchProp,\r\n  insert,\r\n  remove,\r\n  setElementText,\r\n});\r\n\r\nexport function createApp(...args) {\r\n  return renderer.createApp(...args);\r\n}\r\n\r\nexport * from \"@guide-mini-vue/runtime-core\";\r\n","export type ICompareFunction<T> = (a: T, b: T) => number;\r\n\r\nexport type IEqualsFunction<T> = (a: T, b: T) => boolean;\r\n\r\nexport type IDiffFunction<T> = (a: T, b: T) => number;\r\n\r\nexport const DOES_NOT_EXIST = -1;\r\n\r\nexport enum Compare {\r\n  LESS_THAN = -1,\r\n  BIGGER_THAN = 1,\r\n  EQUALS = 0,\r\n}\r\n\r\nexport function lesserEquals<T>(a: T, b: T, compareFn: ICompareFunction<T>) {\r\n  const comp = compareFn(a, b);\r\n  return comp === Compare.LESS_THAN || comp === Compare.EQUALS;\r\n}\r\n\r\nexport function biggerEquals<T>(a: T, b: T, compareFn: ICompareFunction<T>) {\r\n  const comp = compareFn(a, b);\r\n  return comp === Compare.BIGGER_THAN || comp === Compare.EQUALS;\r\n}\r\n\r\nexport function defaultCompare<T>(a: T, b: T): number {\r\n  if (a === b) {\r\n    return Compare.EQUALS;\r\n  }\r\n  return a < b ? Compare.LESS_THAN : Compare.BIGGER_THAN;\r\n}\r\n\r\nexport function defaultEquals<T>(a: T, b: T): boolean {\r\n  return a === b;\r\n}\r\n\r\nexport function defaultToString(item: any): string {\r\n  if (item === null) {\r\n    return \"NULL\";\r\n  } else if (item === undefined) {\r\n    return \"UNDEFINED\";\r\n  } else if (typeof item === \"string\" || item instanceof String) {\r\n    return `${item}`;\r\n  }\r\n  return item.toString();\r\n}\r\n\r\nexport function swap(array: any[], a: number, b: number) {\r\n  /* const temp = array[a];\r\n  array[a] = array[b];\r\n  array[b] = temp; */\r\n  [array[a], array[b]] = [array[b], array[a]];\r\n}\r\n\r\nexport function reverseCompare<T>(\r\n  compareFn: ICompareFunction<T>\r\n): ICompareFunction<T> {\r\n  return (a, b) => compareFn(b, a);\r\n}\r\n\r\nexport function defaultDiff<T>(a: T, b: T): number {\r\n  return Number(a) - Number(b);\r\n}\r\n\r\nexport function createNonSortedArray(size: number) {\r\n  const array: number[] = [];\r\n  for (let i = size; i > 0; i--) {\r\n    array.push(i);\r\n  }\r\n  return array;\r\n}\r\n","import { defaultCompare, Compare } from \"./util\";\r\n\r\nexport function findMaxValue<T>(array: T[], compareFn = defaultCompare) {\r\n  if (array && array.length > 0) {\r\n    let max = array[0];\r\n    for (let i = 1; i < array.length; i++) {\r\n      if (compareFn(max, array[i]) === Compare.LESS_THAN) {\r\n        max = array[i];\r\n      }\r\n    }\r\n    return max;\r\n  }\r\n  return undefined;\r\n}\r\n\r\nexport function findMinValue<T>(array: T[], compareFn = defaultCompare) {\r\n  if (array && array.length > 0) {\r\n    let min = array[0];\r\n    for (let i = 1; i < array.length; i++) {\r\n      if (compareFn(min, array[i]) === Compare.BIGGER_THAN) {\r\n        min = array[i];\r\n      }\r\n    }\r\n    return min;\r\n  }\r\n  return undefined;\r\n}\r\n","import { findMaxValue } from \"./min-max-search\";\r\n\r\nexport function countingSort(array: number[]) {\r\n  if (array.length < 2) {\r\n    return array;\r\n  }\r\n\r\n  const maxValue: any = findMaxValue(array);\r\n  let sortedIndex = 0;\r\n  const counts = new Array(maxValue + 1);\r\n\r\n  array.forEach((element) => {\r\n    if (!counts[element]) {\r\n      counts[element] = 0;\r\n    }\r\n    counts[element]++;\r\n  });\r\n\r\n  console.log('Frequencies: ' + counts.join());\r\n\r\n  counts.forEach((element, i) => {\r\n    while (element > 0) {\r\n      array[sortedIndex++] = i;\r\n      element--;\r\n    }\r\n  });\r\n\r\n  return array;\r\n}\r\n","import { Compare, defaultCompare, swap } from \"./util\";\r\n\r\nfunction quick(array, left, right, comparedFn = defaultCompare) {\r\n  let index;\r\n  if (array.length > 1) {\r\n    index = partial(array, left, right, comparedFn);\r\n    if (left < index - 1) {\r\n      quick(array, left, index - 1, comparedFn);\r\n    }\r\n    if (right > index) {\r\n      quick(array, index, right, comparedFn);\r\n    }\r\n  }\r\n  return array;\r\n}\r\n\r\nfunction partial(array, left, right, compareFn) {\r\n  let pivot = array[Math.floor((left + right) / 2)];\r\n  let i = left;\r\n  let j = right;\r\n  while (i <= j) {\r\n    while (compareFn(array[i], pivot) === Compare.LESS_THAN) {\r\n      i++;\r\n    }\r\n    while (compareFn(array[j], pivot) === Compare.BIGGER_THAN) {\r\n      j--;\r\n    }\r\n    if (i <= j) {\r\n      swap(array, i, j);\r\n      i++;\r\n      j--;\r\n    }\r\n  }\r\n  return i;\r\n}\r\n\r\nexport function quickSort(array: any, comparedFn = defaultCompare) {\r\n  return quick(array, 0, array.length - 1, comparedFn);\r\n}\r\n","export const TO_DISPLAY_STRING = Symbol(`toDisplayString`);\r\nexport const CREATE_ELEMENT_VNODE = Symbol(\"createElementVNode\");\r\n\r\nexport const helperNameMap = {\r\n  [TO_DISPLAY_STRING]: \"toDisplayString\",\r\n  [CREATE_ELEMENT_VNODE]: \"createElementVNode\"\r\n};","import { CREATE_ELEMENT_VNODE } from \"./runtimeHelpers\";\r\n\r\nexport const enum NodeTypes {\r\n  TEXT,\r\n  ROOT,\r\n  INTERPOLATION,\r\n  SIMPLE_EXPRESSION,\r\n  ELEMENT,\r\n  COMPOUND_EXPRESSION,\r\n}\r\n\r\nexport const enum ElementTypes {\r\n  ELEMENT,\r\n}\r\n\r\nexport function createSimpleExpression(content) {\r\n  return {\r\n    type: NodeTypes.SIMPLE_EXPRESSION,\r\n    content,\r\n  };\r\n}\r\n\r\nexport function createInterpolation(content) {\r\n  return {\r\n    type: NodeTypes.INTERPOLATION,\r\n    content: content,\r\n  };\r\n}\r\n\r\nexport function createVNodeCall(context, tag, props?, children?) {\r\n  if (context) {\r\n    context.helper(CREATE_ELEMENT_VNODE);\r\n  }\r\n\r\n  return {\r\n    // TODO vue3 里面这里的 type 是 VNODE_CALL\r\n    // 是为了 block 而 mini-vue 里面没有实现 block\r\n    // 所以创建的是 Element 类型就够用了\r\n    type: NodeTypes.ELEMENT,\r\n    tag,\r\n    props,\r\n    children,\r\n  };\r\n}\r\n","import { isString } from \"@guide-mini-vue/shared\";\r\nimport { NodeTypes } from \"./ast\";\r\nimport {\r\n  CREATE_ELEMENT_VNODE,\r\n  helperNameMap,\r\n  TO_DISPLAY_STRING,\r\n} from \"./runtimeHelpers\";\r\n\r\nexport function generate(ast, options = {}) {\r\n  // 先生成 context\r\n  const context = createCodegenContext(ast, options);\r\n  const { push, mode } = context;\r\n\r\n  // 1. 先生成 preambleContext\r\n\r\n  if (mode === \"module\") {\r\n    genModulePreamble(ast, context);\r\n  } else {\r\n    genFunctionPreamble(ast, context);\r\n  }\r\n\r\n  const functionName = \"render\";\r\n\r\n  const args = [\"_ctx\"];\r\n\r\n  // _ctx,aaa,bbb,ccc\r\n  // 需要把 args 处理成 上面的 string\r\n  const signature = args.join(\", \");\r\n  push(`function ${functionName}(${signature}) {`);\r\n  // 这里需要生成具体的代码内容\r\n  // 开始生成 vnode tree 的表达式\r\n  push(\"return \");\r\n  genNode(ast.codegenNode, context);\r\n\r\n  push(\"}\");\r\n\r\n  return {\r\n    code: context.code,\r\n  };\r\n}\r\n\r\nfunction genFunctionPreamble(ast: any, context: any) {\r\n  const { runtimeGlobalName, push, newline } = context;\r\n  const VueBinging = runtimeGlobalName;\r\n\r\n  const aliasHelper = (s) => `${helperNameMap[s]} : _${helperNameMap[s]}`;\r\n\r\n  if (ast.helpers.length > 0) {\r\n    push(\r\n      `\r\n        const { ${ast.helpers.map(aliasHelper).join(\", \")}} = ${VueBinging} \r\n\r\n      `\r\n    );\r\n  }\r\n\r\n  newline();\r\n  push(`return `);\r\n}\r\n\r\nfunction genNode(node: any, context: any) {\r\n  // 生成代码的规则就是读取 node ，然后基于不同的 node 来生成对应的代码块\r\n  // 然后就是把代码快给拼接到一起就可以了\r\n\r\n  switch (node.type) {\r\n    case NodeTypes.INTERPOLATION:\r\n      genInterpolation(node, context);\r\n      break;\r\n    case NodeTypes.SIMPLE_EXPRESSION:\r\n      genExpression(node, context);\r\n      break;\r\n\r\n    case NodeTypes.ELEMENT:\r\n      genElement(node, context);\r\n      break;\r\n\r\n    case NodeTypes.COMPOUND_EXPRESSION:\r\n      genCompoundExpression(node, context);\r\n      break;\r\n\r\n    case NodeTypes.TEXT:\r\n      genText(node, context);\r\n      break;\r\n\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\nfunction genCompoundExpression(node: any, context: any) {\r\n  const { push } = context;\r\n  for (let i = 0; i < node.children.length; i++) {\r\n    const child = node.children[i];\r\n    if (isString(child)) {\r\n      push(child);\r\n    } else {\r\n      genNode(child, context);\r\n    }\r\n  }\r\n}\r\n\r\nfunction genText(node: any, context: any) {\r\n  // Implement\r\n  const { push } = context;\r\n\r\n  push(`'${node.content}'`);\r\n}\r\n\r\nfunction genElement(node, context) {\r\n  const { push, helper } = context;\r\n  const { tag, props, children } = node;\r\n\r\n  push(`${helper(CREATE_ELEMENT_VNODE)}(`);\r\n\r\n  genNodeList(genNullableArgs([tag, props, children]), context);\r\n\r\n  push(`)`);\r\n}\r\n\r\nfunction genNodeList(nodes: any, context: any) {\r\n  const { push } = context;\r\n  for (let i = 0; i < nodes.length; i++) {\r\n    const node = nodes[i];\r\n\r\n    if (isString(node)) {\r\n      push(`${node}`);\r\n    } else {\r\n      genNode(node, context);\r\n    }\r\n    // node 和 node 之间需要加上 逗号(,)\r\n    // 但是最后一个不需要 \"div\", [props], [children]\r\n    if (i < nodes.length - 1) {\r\n      push(\", \");\r\n    }\r\n  }\r\n}\r\n\r\nfunction genNullableArgs(args) {\r\n  // 把末尾为null 的都删除掉\r\n  // vue3源码中，后面可能会包含 patchFlag、dynamicProps 等编译优化的信息\r\n  // 而这些信息有可能是不存在的，所以在这边的时候需要删除掉\r\n  let i = args.length;\r\n  // 这里 i-- 用的还是特别的巧妙的\r\n  // 当为0 的时候自然就退出循环了\r\n  while (i--) {\r\n    if (args[i] != null) break;\r\n  }\r\n\r\n  // 把为 falsy 的值都替换成 \"null\"\r\n  return args.slice(0, i + 1).map((arg) => arg || \"null\");\r\n}\r\n\r\nfunction genExpression(node: any, context: any) {\r\n  context.push(node.content, node);\r\n}\r\n\r\nfunction genInterpolation(node: any, context: any) {\r\n  const { push, helper } = context;\r\n  push(`${helper(TO_DISPLAY_STRING)}(`);\r\n  genNode(node.content, context);\r\n  push(\")\");\r\n}\r\n\r\nfunction genModulePreamble(ast, context) {\r\n  // preamble 就是 import 语句\r\n  const { push, newline, runtimeModuleName } = context;\r\n\r\n  if (ast.helpers.length) {\r\n    // 比如 ast.helpers 里面有个 [toDisplayString]\r\n    // 那么生成之后就是 import { toDisplayString as _toDisplayString } from \"vue\"\r\n    const code = `import {${ast.helpers\r\n      .map((s) => `${helperNameMap[s]} as _${helperNameMap[s]}`)\r\n      .join(\", \")} } from ${JSON.stringify(runtimeModuleName)}`;\r\n\r\n    push(code);\r\n  }\r\n\r\n  newline();\r\n  push(`export `);\r\n}\r\n\r\nfunction createCodegenContext(\r\n  ast: any,\r\n  { runtimeModuleName = \"vue\", runtimeGlobalName = \"Vue\", mode = \"function\" }\r\n): any {\r\n  const context = {\r\n    code: \"\",\r\n    mode,\r\n    runtimeModuleName,\r\n    runtimeGlobalName,\r\n    helper(key) {\r\n      return `_${helperNameMap[key]}`;\r\n    },\r\n    push(code) {\r\n      context.code += code;\r\n    },\r\n    newline() {\r\n      // 换新行\r\n      // TODO 需要额外处理缩进\r\n      context.code += \"\\n\";\r\n    },\r\n  };\r\n\r\n  return context;\r\n}\r\n","import { ElementTypes, NodeTypes } from \"./ast\";\r\n\r\nconst enum TagType {\r\n  Start,\r\n  End,\r\n}\r\n\r\nexport function baseParse(content: string) {\r\n  const context = createParserContext(content);\r\n  return createRoot(parseChildren(context, []));\r\n}\r\n\r\nfunction createParserContext(content) {\r\n  console.log(\"创建 paserContext\");\r\n  return {\r\n    source: content,\r\n  };\r\n}\r\n\r\nfunction parseChildren(context, ancestors) {\r\n  console.log(\"开始解析 children\");\r\n  const nodes: any = [];\r\n\r\n  while (!isEnd(context, ancestors)) {\r\n    let node;\r\n    const s = context.source;\r\n\r\n    if (startsWith(s, \"{{\")) {\r\n      node = parseInterpolation(context);\r\n    } else if (s[0] === \"<\") {\r\n      if (s[1] === \"/\") {\r\n        if (/[a-z]/i.test(s[2])) {\r\n          // 匹配 </div>\r\n          parseTag(context, TagType.End);\r\n          continue;\r\n        }\r\n      } else if (/[a-z]/i.test(s[1])) {\r\n        node = parseElement(context, ancestors);\r\n      }\r\n    }\r\n\r\n    if (!node) {\r\n      node = parseText(context);\r\n    }\r\n\r\n    nodes.push(node);\r\n  }\r\n\r\n  return nodes;\r\n}\r\n\r\nfunction isEnd(context: any, ancestors) {\r\n  const s = context.source;\r\n  if (context.source.startsWith(\"</\")) {\r\n    for (let i = ancestors.length - 1; i >= 0; --i) {\r\n      if (startsWithEndTagOpen(s, ancestors[i].tag)) {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n\r\n  return !context.source;\r\n}\r\n\r\nfunction parseElement(context, ancestors) {\r\n  const element = parseTag(context, TagType.Start);\r\n\r\n  ancestors.push(element);\r\n  const children = parseChildren(context, ancestors);\r\n  ancestors.pop();\r\n\r\n  if (startsWithEndTagOpen(context.source, element.tag)) {\r\n    parseTag(context, TagType.End);\r\n  } else {\r\n    throw new Error(`缺失结束标签：${element.tag}`);\r\n  }\r\n\r\n  element.children = children;\r\n\r\n  return element;\r\n}\r\n\r\nfunction startsWithEndTagOpen(source: string, tag: string) {\r\n  return (\r\n    startsWith(source, \"</\") &&\r\n    source.slice(2, 2 + tag.length).toLowerCase() === tag.toLowerCase()\r\n  );\r\n}\r\n\r\nfunction parseTag(context: any, type: TagType): any {\r\n  // 正则\r\n  const match: any = /^<\\/?([a-z][^\\r\\n\\t\\f />]*)/i.exec(context.source);\r\n  const tag = match[1];\r\n\r\n  advanceBy(context, match[0].length);\r\n\r\n  advanceBy(context, 1);\r\n\r\n  if (type === TagType.End) return;\r\n\r\n  let tagType = ElementTypes.ELEMENT;\r\n\r\n  return {\r\n    type: NodeTypes.ELEMENT,\r\n    tag,\r\n    tagType,\r\n  };\r\n}\r\n\r\nfunction parseInterpolation(context: any) {\r\n  const openDelimiter = \"{{\";\r\n  const closeDelimiter = \"}}\";\r\n\r\n  const closeIndex = context.source.indexOf(\r\n    closeDelimiter,\r\n    openDelimiter.length\r\n  );\r\n\r\n  advanceBy(context, 2);\r\n\r\n  const rawContentLength = closeIndex - openDelimiter.length;\r\n  const rawContent = context.source.slice(0, rawContentLength);\r\n\r\n  const preTrimContent = parseTextData(context, rawContent.length);\r\n  const content = preTrimContent.trim();\r\n\r\n  advanceBy(context, closeDelimiter.length);\r\n\r\n  return {\r\n    type: NodeTypes.INTERPOLATION,\r\n    content: {\r\n      type: NodeTypes.SIMPLE_EXPRESSION,\r\n      content,\r\n    },\r\n  };\r\n}\r\n\r\nfunction parseText(context): any {\r\n  console.log(\"解析 text\", context);\r\n\r\n  const endTokens = [\"<\", \"{{\"];\r\n  let endIndex = context.source.length;\r\n\r\n  for (let i = 0; i < endTokens.length; i++) {\r\n    const index = context.source.indexOf(endTokens[i]);\r\n    if (index !== -1 && endIndex > index) {\r\n      endIndex = index;\r\n    }\r\n  }\r\n\r\n  const content = parseTextData(context, endIndex);\r\n\r\n  return {\r\n    type: NodeTypes.TEXT,\r\n    content,\r\n  };\r\n}\r\n\r\nfunction parseTextData(context: any, length: number): any {\r\n  console.log(\"解析 textData\");\r\n  const rawText = context.source.slice(0, length);\r\n  advanceBy(context, length);\r\n\r\n  return rawText;\r\n}\r\n\r\nfunction advanceBy(context, numberOfCharacters) {\r\n  console.log(\"推进代码\", context, numberOfCharacters);\r\n  context.source = context.source.slice(numberOfCharacters);\r\n}\r\n\r\nfunction createRoot(children) {\r\n  return {\r\n    type: NodeTypes.ROOT,\r\n    children,\r\n    helpers: [],\r\n  };\r\n}\r\n\r\nfunction startsWith(source: string, searchString: string): boolean {\r\n  return source.startsWith(searchString);\r\n}","import { NodeTypes } from \"./ast\";\r\nimport { TO_DISPLAY_STRING } from \"./runtimeHelpers\";\r\n\r\nexport function transform(root, options = {}) {\r\n  // 1. 创建 context\r\n\r\n  const context = createTransformContext(root, options);\r\n\r\n  // 2. 遍历 node\r\n  traverseNode(root, context);\r\n\r\n  createRootCodegen(root, context);\r\n\r\n  root.helpers.push(...context.helpers.keys());\r\n}\r\n\r\nfunction traverseNode(node: any, context) {\r\n  const type: NodeTypes = node.type;\r\n\r\n  // 遍历调用所有的 nodeTransforms\r\n  // 把 node 给到 transform\r\n  // 用户可以对 node 做处理\r\n  const nodeTransforms = context.nodeTransforms;\r\n  const exitFns: any = [];\r\n  for (let i = 0; i < nodeTransforms.length; i++) {\r\n    const transform = nodeTransforms[i];\r\n\r\n    const onExit = transform(node, context);\r\n    if (onExit) {\r\n      exitFns.push(onExit);\r\n    }\r\n  }\r\n\r\n  switch (type) {\r\n    case NodeTypes.INTERPOLATION:\r\n      // 插值的点，在于后续生成 render 代码的时候是获取变量的值\r\n      context.helper(TO_DISPLAY_STRING);\r\n      break;\r\n\r\n    case NodeTypes.ROOT:\r\n    case NodeTypes.ELEMENT:\r\n      traverseChildren(node, context);\r\n      break;\r\n\r\n    default:\r\n      break;\r\n  }\r\n\r\n  let i = exitFns.length;\r\n  // i-- 这个很巧妙\r\n  // 使用 while 是要比 for 快 (可以使用 https://jsbench.me/ 来测试一下)\r\n  while (i--) {\r\n    exitFns[i]();\r\n  }\r\n}\r\n\r\nfunction traverseChildren(parent: any, context: any) {\r\n  // node.children\r\n  parent.children.forEach((node) => {\r\n    // TODO 需要设置 context 的值\r\n    traverseNode(node, context);\r\n  });\r\n}\r\n\r\nfunction createTransformContext(root, options): any {\r\n  const context = {\r\n    root,\r\n    nodeTransforms: options.nodeTransforms || [],\r\n    helpers: new Map(),\r\n    helper(name) {\r\n      // 这里会收集调用的次数\r\n      // 收集次数是为了给删除做处理的， （当只有 count 为0 的时候才需要真的删除掉）\r\n      // helpers 数据会在后续生成代码的时候用到\r\n      const count = context.helpers.get(name) || 0;\r\n      context.helpers.set(name, count + 1);\r\n    },\r\n  };\r\n\r\n  return context;\r\n}\r\n\r\nfunction createRootCodegen(root: any, context: any) {\r\n  const { children } = root;\r\n\r\n  // 只支持有一个根节点\r\n  // 并且还是一个 single text node\r\n  const child = children[0];\r\n\r\n  // 如果是 element 类型的话 ， 那么我们需要把它的 codegenNode 赋值给 root\r\n  // root 其实是个空的什么数据都没有的节点\r\n  // 所以这里需要额外的处理 codegenNode\r\n  // codegenNode 的目的是专门为了 codegen 准备的  为的就是和 ast 的 node 分离开\r\n  if (child.type === NodeTypes.ELEMENT && child.codegenNode) {\r\n    const codegenNode = child.codegenNode;\r\n    root.codegenNode = codegenNode;\r\n  } else {\r\n    root.codegenNode = child;\r\n  }\r\n}\r\n","import { NodeTypes } from \"../ast\";\r\n\r\nexport function transformExpression(node) {\r\n  if (node.type === NodeTypes.INTERPOLATION) {\r\n    node.content = processExpression(node.content);\r\n  }\r\n}\r\n\r\nfunction processExpression(node) {\r\n  node.content = `_ctx.${node.content}`;\r\n\r\n  return node\r\n}","import { createVNodeCall, NodeTypes } from \"../ast\";\r\n\r\nexport function transformElement(node, context) {\r\n  if (node.type === NodeTypes.ELEMENT) {\r\n    return () => {\r\n      const vnodeTag = `'${node.tag}'`;\r\n      // TODO props 暂时不支持\r\n      const vnodeProps = null;\r\n      let vnodeChildren = null;\r\n      if (node.children.length > 0) {\r\n        if (node.children.length === 1) {\r\n          // 只有一个孩子节点 ，那么当生成 render 函数的时候就不用 [] 包裹\r\n          const child = node.children[0];\r\n          vnodeChildren = child;\r\n        }\r\n      }\r\n\r\n      // 创建一个新的 node 用于 codegen 的时候使用\r\n      node.codegenNode = createVNodeCall(\r\n        context,\r\n        vnodeTag,\r\n        vnodeProps,\r\n        vnodeChildren\r\n      );\r\n    };\r\n  }\r\n}","import { NodeTypes } from \"./ast\";\r\n\r\nexport function isText(node) {\r\n  return node.type === NodeTypes.INTERPOLATION || node.type === NodeTypes.TEXT;\r\n}\r\n","import { NodeTypes } from \"../ast\";\r\nimport { isText } from \"../utils\";\r\n\r\nexport function transformText(node, context) {\r\n  if (node.type === NodeTypes.ELEMENT) {\r\n    return () => {\r\n\r\n      const children = node.children;\r\n      let currentContainer;\r\n\r\n      for (let i = 0; i < children.length; i++) {\r\n        const child = children[i];\r\n\r\n        if (isText(child)) {\r\n          // 看看下一个节点是不是 text 类\r\n          for (let j = i + 1; j < children.length; j++) {\r\n            const next = children[j];\r\n            if (isText(next)) {\r\n              // currentContainer 的目的是把相邻的节点都放到一个 容器内\r\n              if (!currentContainer) {\r\n                currentContainer = children[i] = {\r\n                  type: NodeTypes.COMPOUND_EXPRESSION,\r\n                  loc: child.loc,\r\n                  children: [child],\r\n                };\r\n              }\r\n\r\n              currentContainer.children.push(` + `, next);\r\n              // 把当前的节点放到容器内, 然后删除掉j\r\n              children.splice(j, 1);\r\n              // 因为把 j 删除了，所以这里就少了一个元素，那么 j 需要 --\r\n              j--;\r\n            } else {\r\n              currentContainer = undefined;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n  }\r\n}","import { generate } from \"./codegen\";\r\nimport { baseParse } from \"./parse\";\r\nimport { transform } from \"./transform\";\r\nimport { transformExpression } from \"./transforms/transformExpression\";\r\nimport { transformElement } from \"./transforms/transformElement\";\r\nimport { transformText } from \"./transforms/transformText\";\r\n\r\nexport function baseCompile(template, options = {}) {\r\n  // 1. 先把 template 也就是字符串 parse 成 ast\r\n  const ast = baseParse(template);\r\n  transform(\r\n    ast,\r\n    Object.assign(options, {\r\n      nodeTransforms: [transformElement, transformText, transformExpression],\r\n    })\r\n  );\r\n\r\n  // 3. 生成 render 函数代码\r\n  return generate(ast);\r\n}\r\n","// mini-vue 出口\r\nexport * from \"@guide-mini-vue/runtime-dom\";\r\nexport * from \"@guide-mini-vue/algorithms\";\r\n\r\nimport { baseCompile } from \"@guide-mini-vue/compiler-core\";\r\nimport * as runtimeDom from \"@guide-mini-vue/runtime-dom\";\r\nimport { registerRuntimeCompiler } from \"@guide-mini-vue/runtime-dom\";\r\n\r\nfunction compileToFunction(template) {\r\n  const { code } = baseCompile(template);\r\n  const render = new Function(\"Vue\", code)(runtimeDom);\r\n\r\n  return render;\r\n}\r\n\r\nregisterRuntimeCompiler(compileToFunction);\r\n"],"names":[],"mappings":"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"}
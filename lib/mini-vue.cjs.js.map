{"version":3,"file":"mini-vue.cjs.js","sources":["../src/runtime-core/vnode.ts","../src/runtime-core/h.ts","../src/runtime-core/component.ts","../src/runtime-core/renderer.ts","../src/runtime-core/createApp.ts"],"sourcesContent":["export function createVNode(type,prop?,children?) {\r\n    return {\r\n        type,\r\n        prop,\r\n        children\r\n    }\r\n}","import { createVNode } from \"./vnode\";\r\nexport const h = (type: string, props: any, children: string | Array<any>) => {\r\n  return createVNode(type, props, children);\r\n};\r\n","export function createComponentInstance(vnode) {\r\n  const component = {\r\n    type: vnode.type,\r\n    vnode,\r\n  };\r\n\r\n  return component;\r\n}\r\n\r\nexport function setupComponent(instance) {\r\n  // initProps()\r\n  // initSlots()\r\n\r\n  setupStatefulComponent(instance);\r\n}\r\n\r\nfunction setupStatefulComponent(instance: any) {\r\n  // 获取到用户给到的配置\r\n  const Component = instance.type;\r\n\r\n  const { setup } = Component;\r\n  if (setup) {\r\n    // function Object\r\n\r\n    const setupResult = setup();\r\n    handleSetupResult(instance, setupResult);\r\n  }\r\n}\r\n\r\nfunction handleSetupResult(instance: any, setupResult: any) {\r\n  if (typeof setupResult === \"object\") {\r\n    instance.setupState = setupResult;\r\n  }\r\n\r\n  finishComponentSetup(instance);\r\n}\r\n\r\nfunction finishComponentSetup(instance: any) {\r\n  const Component = instance.type;\r\n  if (Component.render) {\r\n    instance.render = Component.render;\r\n  }\r\n}\r\n","import { createComponentInstance, setupComponent } from \"./component\"\r\n\r\nexport function render (vnode,container) {\r\n    // path\r\n    patch(vnode,container)\r\n    \r\n}\r\n\r\nfunction patch(vnode,container) {\r\n\r\n    // 去处理组件\r\n    processComponent(vnode,container)\r\n\r\n}\r\n\r\nfunction processComponent(vnode,container) {\r\n    mountComponent(vnode,container)\r\n}\r\n\r\nfunction mountComponent(vnode:any,container) {\r\n    const instance = createComponentInstance(vnode)\r\n    setupComponent(instance);\r\n    setupRenderEffect(instance,container);\r\n}\r\n\r\nfunction setupRenderEffect(instance: any,container) {\r\n    const subTree= instance.render();\r\n\r\n    // vnode -> patch\r\n    // vnode -> element\r\n\r\n    patch(subTree,container)\r\n}\r\n","import { render } from \"./renderer\";\r\nimport { createVNode } from \"./vnode\";\r\n\r\nexport function createApp(rootComponent) {\r\n  return {\r\n    mount(rootContainer) {\r\n      // 先转换为vnode\r\n      // 所有的逻辑操作都会基于vnode做处理\r\n      const vnode = createVNode(rootComponent);\r\n\r\n      render(vnode, rootContainer);\r\n    },\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;SAAgB,WAAW,CAAC,IAAI,EAAC,IAAK,EAAC,QAAS,EAAA;IAC5C,OAAO;AACH,QAAA,IAAI,EAAA,IAAA;AACJ,QAAA,IAAI,EAAA,IAAA;AACJ,QAAA,QAAQ,EAAA,QAAA;KACX,CAAA;AACL;;ICLa,CAAC,GAAG,UAAC,IAAY,EAAE,KAAU,EAAE,QAA6B,EAAA;IACvE,OAAO,WAAW,CAAC,IAAI,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC;AAC5C;;ACHM,SAAU,uBAAuB,CAAC,KAAK,EAAA;AAC3C,IAAA,IAAM,SAAS,GAAG;QAChB,IAAI,EAAE,KAAK,CAAC,IAAI;AAChB,QAAA,KAAK,EAAA,KAAA;KACN,CAAC;AAEF,IAAA,OAAO,SAAS,CAAC;AACnB,CAAC;AAEK,SAAU,cAAc,CAAC,QAAQ,EAAA;;;IAIrC,sBAAsB,CAAC,QAAQ,CAAC,CAAC;AACnC,CAAC;AAED,SAAS,sBAAsB,CAAC,QAAa,EAAA;;AAE3C,IAAA,IAAM,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAC;AAExB,IAAA,IAAA,KAAK,GAAK,SAAS,CAAA,KAAd,CAAe;AAC5B,IAAA,IAAI,KAAK,EAAE;;AAGT,QAAA,IAAM,WAAW,GAAG,KAAK,EAAE,CAAC;AAC5B,QAAA,iBAAiB,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC;AAC1C,KAAA;AACH,CAAC;AAED,SAAS,iBAAiB,CAAC,QAAa,EAAE,WAAgB,EAAA;AACxD,IAAA,IAAI,OAAO,WAAW,KAAK,QAAQ,EAAE;AACnC,QAAA,QAAQ,CAAC,UAAU,GAAG,WAAW,CAAC;AACnC,KAAA;IAED,oBAAoB,CAAC,QAAQ,CAAC,CAAC;AACjC,CAAC;AAED,SAAS,oBAAoB,CAAC,QAAa,EAAA;AACzC,IAAA,IAAM,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAC;IAChC,IAAI,SAAS,CAAC,MAAM,EAAE;AACpB,QAAA,QAAQ,CAAC,MAAM,GAAG,SAAS,CAAC,MAAM,CAAC;AACpC,KAAA;AACH;;ACxCgB,SAAA,MAAM,CAAE,KAAK,EAAC,SAAS,EAAA;;AAEnC,IAAA,KAAK,CAAC,KAAe,CAAC,CAAA;AAE1B,CAAC;AAED,SAAS,KAAK,CAAC,KAAK,EAAC,SAAS,EAAA;;AAG1B,IAAA,gBAAgB,CAAC,KAAe,CAAC,CAAA;AAErC,CAAC;AAED,SAAS,gBAAgB,CAAC,KAAK,EAAC,SAAS,EAAA;AACrC,IAAA,cAAc,CAAC,KAAe,CAAC,CAAA;AACnC,CAAC;AAED,SAAS,cAAc,CAAC,KAAS,EAAC,SAAS,EAAA;AACvC,IAAA,IAAM,QAAQ,GAAG,uBAAuB,CAAC,KAAK,CAAC,CAAA;IAC/C,cAAc,CAAC,QAAQ,CAAC,CAAC;AACzB,IAAA,iBAAiB,CAAC,QAAkB,CAAC,CAAC;AAC1C,CAAC;AAED,SAAS,iBAAiB,CAAC,QAAa,EAAC,SAAS,EAAA;AAC9C,IAAA,IAAM,OAAO,GAAE,QAAQ,CAAC,MAAM,EAAE,CAAC;;;AAKjC,IAAA,KAAK,CAAC,OAAiB,CAAC,CAAA;AAC5B;;AC7BM,SAAU,SAAS,CAAC,aAAa,EAAA;IACrC,OAAO;AACL,QAAA,KAAK,YAAC,aAAa,EAAA;;;AAGjB,YAAA,IAAM,KAAK,GAAG,WAAW,CAAC,aAAa,CAAC,CAAC;AAEzC,YAAA,MAAM,CAAC,KAAoB,CAAC,CAAC;SAC9B;KACF,CAAC;AACJ;;;;;"}